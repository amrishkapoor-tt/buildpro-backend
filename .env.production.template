# Production Environment Configuration Template
# ==============================================
# Copy this file to .env.production and fill in your actual values
# OR set these as environment variables in your hosting platform (Render, Heroku, etc.)

# ============================================================
# OPTION 1: Local Storage (Ephemeral - NOT RECOMMENDED for production on Render)
# ============================================================
# STORAGE_TYPE=local
# LOCAL_STORAGE_PATH=./uploads
# LOCAL_STORAGE_BASE_URL=/uploads

# WARNING: On Render's free/hobby tier, local files are deleted on:
# - Service restarts
# - New deployments
# - Container recycling
# Use S3 for persistent storage in production!

# ============================================================
# OPTION 2: AWS S3 Storage (RECOMMENDED for production)
# ============================================================
STORAGE_TYPE=s3

# AWS S3 Configuration
# --------------------
# Required: Your S3 bucket name
AWS_S3_BUCKET=buildpro-production-files

# Required: AWS region where your bucket is located
AWS_REGION=us-east-1

# Required: AWS IAM credentials
# Create an IAM user with S3 permissions (PutObject, GetObject, DeleteObject, ListBucket)
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# Optional: Signed URL expiry time in seconds (default: 3600 = 1 hour)
SIGNED_URL_EXPIRY=3600

# ============================================================
# Database Configuration
# ============================================================
# Required: PostgreSQL connection string
DATABASE_URL=postgresql://username:password@host:5432/buildpro_production

# ============================================================
# JWT Configuration
# ============================================================
# Required: Secret key for JWT tokens (use a strong random string)
JWT_SECRET=your-production-jwt-secret-change-this-to-something-secure

# ============================================================
# CORS Configuration
# ============================================================
# Required: Comma-separated list of allowed origins
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# ============================================================
# Server Configuration
# ============================================================
# Optional: Server port (default: 3001)
PORT=3001

# Required: Node environment
NODE_ENV=production

# ============================================================
# AWS S3 Bucket Setup Instructions
# ============================================================
#
# 1. Create S3 Bucket:
#    - Go to AWS S3 console
#    - Click "Create bucket"
#    - Bucket name: buildpro-production-files (must be globally unique)
#    - Region: us-east-1 (or your preferred region)
#    - Block all public access: YES (we'll use signed URLs)
#    - Enable versioning: Optional but recommended
#    - Enable encryption: Optional but recommended
#
# 2. Configure CORS:
#    - Go to bucket → Permissions → CORS
#    - Add the following CORS configuration:
#
#    [
#      {
#        "AllowedHeaders": ["*"],
#        "AllowedMethods": ["GET", "HEAD"],
#        "AllowedOrigins": ["https://yourdomain.com"],
#        "ExposeHeaders": ["ETag"],
#        "MaxAgeSeconds": 3000
#      }
#    ]
#
# 3. Create IAM User:
#    - Go to IAM console
#    - Create new user: buildpro-storage
#    - Access type: Programmatic access
#    - Attach policy with these permissions:
#
#    {
#      "Version": "2012-10-17",
#      "Statement": [
#        {
#          "Effect": "Allow",
#          "Action": [
#            "s3:PutObject",
#            "s3:GetObject",
#            "s3:DeleteObject",
#            "s3:ListBucket"
#          ],
#          "Resource": [
#            "arn:aws:s3:::buildpro-production-files",
#            "arn:aws:s3:::buildpro-production-files/*"
#          ]
#        }
#      ]
#    }
#
#    - Save the Access Key ID and Secret Access Key
#
# 4. Cost Estimate:
#    - Storage: $0.023/GB/month
#    - PUT requests: $0.005 per 1,000 requests
#    - GET requests: $0.0004 per 1,000 requests
#    - Data transfer: First 100GB/month free, then $0.09/GB
#    - Example: 5GB storage, 1000 uploads, 500 downloads = ~$0.35/month
#
# ============================================================
# Deployment to Render
# ============================================================
#
# Set these environment variables in Render dashboard:
# 1. Go to your service → Environment
# 2. Add each variable above (without comments)
# 3. Deploy
#
# Test the storage:
# - Upload a file
# - Restart the service
# - Verify the file still exists (S3) or is gone (local)
#
# ============================================================
